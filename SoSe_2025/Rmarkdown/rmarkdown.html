<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Advanced R for Econometricians</title>
    <meta charset="utf-8" />
    <meta name="author" content="Martin C. Arnold" />
    <meta name="author" content="Martin Schmelzer" />
    <meta name="date" content="2025-03-31" />
    <script src="rmarkdown_files/header-attrs-2.29.1/header-attrs.js"></script>
    <link href="rmarkdown_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <script src="rmarkdown_files/xaringanExtra-progressBar-0.0.1/progress-bar.js"></script>
    <script src="rmarkdown_files/clipboard-2.0.6/clipboard.min.js"></script>
    <link href="rmarkdown_files/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="rmarkdown_files/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-clipboard\"><\/i>","success":"<i class=\"fa fa-check\" style=\"color: #00ff00\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
    <link href="rmarkdown_files/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
    <link href="rmarkdown_files/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />
    <link href="rmarkdown_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
    <script src="rmarkdown_files/htmlwidgets-1.6.4/htmlwidgets.js"></script>
    <script src="rmarkdown_files/plotly-binding-4.10.4/plotly.js"></script>
    <script src="rmarkdown_files/typedarray-0.1/typedarray.min.js"></script>
    <script src="rmarkdown_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <link href="rmarkdown_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
    <script src="rmarkdown_files/crosstalk-1.2.1/js/crosstalk.min.js"></script>
    <link href="rmarkdown_files/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="rmarkdown_files/plotly-main-2.11.1/plotly-latest.min.js"></script>
    <link href="rmarkdown_files/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
    <script src="rmarkdown_files/leaflet-1.3.1/leaflet.js"></script>
    <link href="rmarkdown_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
    <script src="rmarkdown_files/proj4-2.6.2/proj4.min.js"></script>
    <script src="rmarkdown_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
    <link href="rmarkdown_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
    <script src="rmarkdown_files/leaflet-binding-2.2.2/leaflet.js"></script>
    <link href="rmarkdown_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="rmarkdown_files/datatables-binding-0.33/datatables.js"></script>
    <link href="rmarkdown_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="rmarkdown_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="rmarkdown_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } },
      });
    </script>
    <style>
    .mjx-mrow a {
      color: black;
      pointer-events: none;
      cursor: default;
    }
    </style>
    <meta name="robots" content="noindex">
    <link rel="stylesheet" href="../assets/ude_fonts.css" type="text/css" />
    <link rel="stylesheet" href="../assets/ude.css" type="text/css" />
    <link rel="stylesheet" href="../assets/title_slides.css" type="text/css" />
    <link rel="stylesheet" href="../assets/custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: title-slide title-rmarkdown center middle


<style>.xe__progress-bar__container {
  bottom:0;
  opacity: 1;
  position:absolute;
  right:0;
  left: 0;
}
.xe__progress-bar {
  height: 0.25em;
  background-color: #004c93;
  width: calc(var(--slide-current) / var(--slide-total) * 100%);
}
.remark-visible .xe__progress-bar {
  animation: xe__progress-bar__wipe 200ms forwards;
  animation-timing-function: cubic-bezier(.86,0,.07,1);
}
@keyframes xe__progress-bar__wipe {
  0% { width: calc(var(--slide-previous) / var(--slide-total) * 100%); }
  100% { width: calc(var(--slide-current) / var(--slide-total) * 100%); }
}</style>





# Advanced R for Econometricians
## Reproducible Research with R Markdown
### Martin C. Arnold, Martin Schmelzer 
---
class: left, top
## R Markdown

R Markdown provides a framework for combining code, results, and commentary.

You can use R Markdown 

- to generate reports, articles, books ...
- as an environment in which to do data science, as a lab notebook where 
  you can capture not only what you did, but also what you were thinking. 

--

**Some interesting links:**

- [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/) 
- [Introduction to R Markdown](https://rmarkdown.rstudio.com/lesson-1.html)
- [Cheatsheet](https://raw.githubusercontent.com/rstudio/cheatsheets/master/rmarkdown-2.0.pdf)

--

**Example:**

- [Introduction to Econometrics with R](https://www.econometrics-with-r.org)

---
class: left, top
## Whatâ€™s possible with R Markdown?

.center[
&lt;iframe src="https://player.vimeo.com/video/178485416?color=428bca&amp;title=0&amp;byline=0&amp;portrait=0" width="720" height="480" frameborder="0" allow="autoplay; fullscreen" allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;&lt;a href="https://vimeo.com/178485416"&gt;What is R Markdown?&lt;/a&gt; from &lt;a href="https://vimeo.com/rstudioinc"&gt;RStudio, Inc.&lt;/a&gt; on &lt;a href="https://vimeo.com"&gt;Vimeo&lt;/a&gt;.&lt;/p&gt;
]
---
class: left, top

## Basic example

.font80.blockquote.exercise.pull-left-2[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example

````
---
title: "Diamond sizes"
date: 2016-08-25
output: html_document
---

```{r, include=FALSE}
library(tidyverse)
data("diamonds")
smaller &lt;- diamonds %&gt;%
            filter(carat &lt; 2.5)
```

We have data about `r nrow(diamonds)` diamonds. Only 
`r nrow(diamonds) - nrow(smaller)` are **larger** than
2.5 *carats*. The distribution of the remainder is shown
below:

```{r, echo = FALSE}
smaller %&gt;% 
  ggplot(aes(carat)) + 
  geom_freqpoly(binwidth = 0.01)
```

If $\frac{\alpha}{\beta} = \gamma$ then $\alpha = \gamma\beta$.
````

]

--

.pull-right-1.font80[
- If this is stored as `example.rmd` in your working directory run `knitr::render(example.rmd)` to create an output document. 
- Alternatively, hit the &lt;img src="../img/knit.PNG" width="79" /&gt; button in Rstudio.
- Or you can use the short key combination `Ctrl + Shift + K`
]

---
class: left, top

## How it works 

&lt;br&gt; 

An R Markdown document is a basic text file, with the (conventional) extension `.Rmd`.

The example already contains the most important components:

- An (optional) YAML header surrounded by ---
- Chunks of R code surrounded by ` ```{r, ...} ` and ` ``` `
- Inline R code surrounded by ` `r ` and ` ` `
- Text mixed with simple text formatting like **bold** and _italics_
- Mathematical expressions
---

class: left, top

## How it works 

&lt;br&gt;

When we click **knit** in RStudio then 
1. the `knitr` package executes the code chunks and creates a markdown document (`.md`) which contains the text we have written and optionally the code and its output 
2. the `.md` file gets processed by `pandoc` which creates the final file in the desired output format (e.g. `html`, `pdf`, `word`, ...)

&lt;br&gt;

.center[
![](rendering_process.PNG)
]

---
class: left, top

## The YAML header

The YAML header contains settings passed to pandoc and the rendering functions.
Here you can: 
- specify the output format with optional output specific options 
- provide information for the title page such as title, name, and date
- include external files (e.g. `.css`) or additional packages for `\(\LaTeX\)`
- define parameters. 

--

.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example: Basic YAML header using mostly defaults

```yaml
---
title: Habits
author: John Doe
date: March 22, 2005
output: html_document
---
```
]
???

YAML Ain't Markup Language, a recursive acronym, to distinguish its purpose as data-oriented, rather than document markup.
---
class: left, top

## The YAML header

.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example:  A more complicated YAML header

```nohighlights
---
title: Habits
author: John Doe
date: March 22, 2005
output:
  html_document:
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false
    css: my_style.css
params: 
  pi: 3.141593
---
```
]
---
class: left, top

## Output Formats

- [`html_notebook`](https://bookdown.org/yihui/rmarkdown/notebook.html)      - Interactive R Notebooks  
- [`html_document`](https://bookdown.org/yihui/rmarkdown/html-document.html) - HTML document 
- [`pdf_document`](https://bookdown.org/yihui/rmarkdown/pdf-document.html)   &amp;nbsp; - PDF document
- [`word_document`](https://bookdown.org/yihui/rmarkdown/word-document.html) - Microsoft Word document 

&lt;br&gt;

Learn more about further output formats at [https://rmarkdown.rstudio.com](https://rmarkdown.rstudio.com/lesson-9.html).

---
class: left, top

## Text Formatting

- R Markdown is built on [Pandoc Markdown](https://rmarkdown.rstudio.com/authoring_pandoc_markdown.html%23raw-tex#pandoc_markdown), which in turn is a flavour of the markup language Markdown.  
- The advantage of Markdown compared to other markup languages such as HTML and  `\(\LaTeX\)` is its simplicity.

---

class: left, top
## Text Formatting



.pull-left[
.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example: Headers
```markdown
     #   Header 1     
     ##  Header 2   
     ### Header 3 
```
]
&lt;br&gt;

  .scaled[
  #   Header 1 
  ##  Header 2
  ### Header 3
 ]
 
]

--

.pull-right[ 
.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Inline formatting

```markdown
     *italics* 
     **bold**
     This ~~is deleted text.~~
     Some code: `lm(y ~ x)`.
```
]
    
    *italics*  
    **bold**  
    This ~~is deleted text.~~  
    Some code: `lm(y ~ x)`. 
]


---
class: left, top

## Text Formatting

.pull-left[.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt;  Unordered Lists

```markdown
  * Item
    - Item belonging to item
    - Another item belonging to item
  * Item
  * Item
```
]

* Item
  - Item belonging to item
  - Another item belonging to item
* Item
* Item  

]

--

.pull-right[.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Ordered Lists

```markdown
  1. First item
    - First subitem
    - Second subitem 
  2. Second item
  3. Third item
```
]

1. First item  
    - First subitem
    - Second subitem
2. Second item
3. Third item

]

--

**Note:** Markdown does not support nested ordered lists with numbering 1.1, 1.2.1 and so on. For this, you would have to fall back to HTML or `\(\LaTeX\)`. 

---
class: left, top

## Text Formatting

&lt;br&gt;

.pull-left[.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Linebreaks  
```markdown
First line  
Second line
```
]

  First line  
  Second line

&lt;br&gt; &lt;br&gt;

A new line is started by two whitespaces at the end of the previous line (which you cannot see here).

]

--

.pull-right[.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Paragraphs

```markdown
  First paragraph
  
  Second paragraph
```
]

  First paragraph

  Second paragraph

&lt;br&gt;

A new paragraph is started by a blank line.

]


---
class: left, top
## Math Expressions

When rendering to a pdf `\(\LaTeX{}\)` can be used throughout the document.  
Through `MathJax` the `\(\LaTeX{}\)` math mode can also be used for HTML output as follows: 

--

- Inline `\(\LaTeX{}\)` equations can be written within dollar signs.  

.blockquote.exercise[

```
This is an inline equation $f(x)=\frac{1}{\sqrt{2\pi}}\exp{\left(-\frac{1}{2}x^2\right)}$.
```
]

This is an inline equation `\(f(x)=\frac{1}{\sqrt{2\pi}}\exp{\left(-\frac{1}{2}x^2\right)}\)`.

--
  
- Display style `\(\LaTeX{}\)` equations can be written within double dollar signs.  

.blockquote.exercise[

```
This is display style $$f(x)=\frac{1}{\sqrt{2\pi}}\exp{\left(-\frac{1}{2}x^2\right)}$$.
```
]

This is display style `$$f(x)=\frac{1}{\sqrt{2\pi}}\exp{\left(-\frac{1}{2}x^2\right)}$$`

---
class: left, top
## Math Expressions

- Even more complex math environments such as `align` can be used 

.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example


```
\begin{align}
(a+b)^{3} &amp;=(a+b)(a+b)^{2} \\
          &amp;=(a+b)\left(a^{2}+2 a b+b^{2}\right) \\
          &amp;=a^{3}+3 a^{2} b+3 a b^{2}+b^{3} 
\end{align}
```
]

&lt;br&gt;   

--

\\begin{align}
(a+b)^{3} &amp;=(a+b)(a+b)^{2} \\\\
          &amp;=(a+b)\\left(a^{2}+2 a b+b^{2}\\right) \\\\
          &amp;=a^{3}+3 a^{2} b+3 a b^{2}+b^{3} 
\\end{align}

---
class: left, top
## Code Chunks

.font90[
- You can write arbitrary R code in a code chunk (e.g. run a regression and produce a plot of the result). 
- The code, the result of the code or both can be included into the final document. 
- In the top curly braces, chunk options can be set to control how the output is handled.
]

--

.font90[
Some useful options: 
  - `eval`(`TRUE`; logical): whether to evaluate the code chunk  
  - `echo`(`TRUE`; logical or numeric): whether to include R source code in the output file
  - `cache`(`FALSE`; logical): whether to cache a code chunk 
  - `warning` (`TRUE`; logical): whether to preserve warnings 
  - `message` (`TRUE`; logical): whether to preserve messages 
  - `include` (`TRUE`; logical): whether to include the chunk output in the final output document
]

--

.font90[
For a complete list, we refer to the `knitr` documentation: [Chunk options](https://yihui.name/knitr/options#code-evaluation).
]

--

.font90[
- Press `Ctrl + Alt + I` to insert a new R code chunk.

]

---
class: left, top
## Code Chunks

.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example

````markdown
```{r lin_reg, echo=TRUE, cache = TRUE}
x &lt;- runif(100)
y &lt;- 0.4 * x + rnorm(100)
lm(y ~ x)
```
````
]

--

&lt;br&gt;

If you mainly use chunk options which are not the default, then it saves time to change the default for the document with `knitr::opts_chunk$set()`.  

.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example: chunk setup 

````markdown
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, warning=FALSE, message=FALSE)
```
````
]
---
class: left, top
## Inline R Code

You can also use R in your running text. When something changes (e.g. the input data) the numbers in the text adjust accordingly as well. 

.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example

````markdown
```{r, echo=FALSE}
x &lt;- 4
y &lt;- 38
answer &lt;- x + y
```
The answer is `r answer`
````
]



--

The answer is 42.

---
class: left, top
## Tables 

.font90[
Tables can be created as follows:
&lt;br&gt;
.blockquote.exercise[

#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example


```markdown
| Right | Left | Default | Center |
|------:|:-----|---------|:------:|
|   12  |   12 |   12    |   12   | 
|  123  |  123 |  123    |  123   | 
|    1  |    1 |    1    |    1   | 
```
]]

--

.font70[

&lt;br&gt;&lt;br&gt;

| Right | Left | Default | Center |
|------:|:-----|---------|:------:|
|   12  |   12 |   12    |   12   | 
|  123  |  123 |  123    |  123   | 
|   1   |   1  |   1     |   1    | 
]

--

&lt;br&gt;

In general, however, tables will be produced programmatically.
The following slides show some examples. 



---
class: left, top
## `gt`

- `gt::gt()` is probably the easiest way to transform a matrix or a data frame into a table.

.pull-left[
.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example
````markdown
```{r}
gtobj &lt;- citizens %&gt;%
  mutate(
    isGerman = Citizenship1 == "German"
  ) %&gt;%
  group_by(District) %&gt;%
  summarise(isNotGerman = sum(!isGerman),
            isGerman = sum(isGerman)) %&gt;%
  gt()
```
````
]]


--





.pull-right[
<div id="plvqdwlvrs" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#plvqdwlvrs table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#plvqdwlvrs thead, #plvqdwlvrs tbody, #plvqdwlvrs tfoot, #plvqdwlvrs tr, #plvqdwlvrs td, #plvqdwlvrs th {
  border-style: none;
}

#plvqdwlvrs p {
  margin: 0;
  padding: 0;
}

#plvqdwlvrs .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#plvqdwlvrs .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#plvqdwlvrs .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#plvqdwlvrs .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#plvqdwlvrs .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#plvqdwlvrs .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#plvqdwlvrs .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#plvqdwlvrs .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#plvqdwlvrs .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#plvqdwlvrs .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#plvqdwlvrs .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#plvqdwlvrs .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#plvqdwlvrs .gt_spanner_row {
  border-bottom-style: hidden;
}

#plvqdwlvrs .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#plvqdwlvrs .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#plvqdwlvrs .gt_from_md > :first-child {
  margin-top: 0;
}

#plvqdwlvrs .gt_from_md > :last-child {
  margin-bottom: 0;
}

#plvqdwlvrs .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#plvqdwlvrs .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#plvqdwlvrs .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#plvqdwlvrs .gt_row_group_first td {
  border-top-width: 2px;
}

#plvqdwlvrs .gt_row_group_first th {
  border-top-width: 2px;
}

#plvqdwlvrs .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#plvqdwlvrs .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#plvqdwlvrs .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#plvqdwlvrs .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#plvqdwlvrs .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#plvqdwlvrs .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#plvqdwlvrs .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#plvqdwlvrs .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#plvqdwlvrs .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#plvqdwlvrs .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#plvqdwlvrs .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#plvqdwlvrs .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#plvqdwlvrs .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#plvqdwlvrs .gt_left {
  text-align: left;
}

#plvqdwlvrs .gt_center {
  text-align: center;
}

#plvqdwlvrs .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#plvqdwlvrs .gt_font_normal {
  font-weight: normal;
}

#plvqdwlvrs .gt_font_bold {
  font-weight: bold;
}

#plvqdwlvrs .gt_font_italic {
  font-style: italic;
}

#plvqdwlvrs .gt_super {
  font-size: 65%;
}

#plvqdwlvrs .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#plvqdwlvrs .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#plvqdwlvrs .gt_indent_1 {
  text-indent: 5px;
}

#plvqdwlvrs .gt_indent_2 {
  text-indent: 10px;
}

#plvqdwlvrs .gt_indent_3 {
  text-indent: 15px;
}

#plvqdwlvrs .gt_indent_4 {
  text-indent: 20px;
}

#plvqdwlvrs .gt_indent_5 {
  text-indent: 25px;
}

#plvqdwlvrs .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#plvqdwlvrs div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="District">District</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="isNotGerman">isNotGerman</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="isGerman">isGerman</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="District" class="gt_row gt_right">1</td>
<td headers="isNotGerman" class="gt_row gt_right">26399</td>
<td headers="isGerman" class="gt_row gt_right">71768</td></tr>
    <tr><td headers="District" class="gt_row gt_right">2</td>
<td headers="isNotGerman" class="gt_row gt_right">15390</td>
<td headers="isGerman" class="gt_row gt_right">42742</td></tr>
    <tr><td headers="District" class="gt_row gt_right">3</td>
<td headers="isNotGerman" class="gt_row gt_right">9471</td>
<td headers="isGerman" class="gt_row gt_right">25852</td></tr>
    <tr><td headers="District" class="gt_row gt_right">4</td>
<td headers="isNotGerman" class="gt_row gt_right">10725</td>
<td headers="isGerman" class="gt_row gt_right">30086</td></tr>
    <tr><td headers="District" class="gt_row gt_right">5</td>
<td headers="isNotGerman" class="gt_row gt_right">10872</td>
<td headers="isGerman" class="gt_row gt_right">29794</td></tr>
  </tbody>
  
  
</table>
</div>
]



---
class: left, top
## `gt`


- Following the philosophy of dplyr, gt is a powerful and flexible tool that offers good readability and extensibility, though it may result in slightly longer code.

- A gt table consists of the elements shown below, which can all be customized as needed.

.center[
![](gt_table_elements.png)
]









---
class: left, top
## `gt`



.font90.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example


``` r
load("../../OEK_ARE.RData")
gtobj &lt;- citizens %&gt;%
  mutate(isGerman = Citizenship1 == "German") %&gt;%
  group_by(District) %&gt;%
  summarise(isNotGerman = sum(!isGerman),
            isGerman = sum(isGerman)) %&gt;%
  gt() %&gt;%
  tab_header(
    title =  "Population of Gelsenkirchen", subtitle = "by District and German Nationality"
  ) %&gt;%
  grand_summary_rows(
    columns = 2:3, 
    fns = list(label = "TOTALS", fn = "sum"), 
    fmt = ~ fmt_number(., sep_mark = ".", decimals = 0, dec_mark = ","),
    missing_text = ""
  ) %&gt;%
  cols_label(
    District = "District",
    isGerman = "German",
    isNotGerman = "Non-German"
  ) 
```
]


---
class: left, top
## `gt`


.font90.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example


``` r
gtobj &lt;- gtobj %&gt;%
  tab_footnote(
    footnote = "Source: City of Gelsenkirchen, Statistics &amp; Monitoring"
  ) %&gt;%
  fmt_number(
    columns = c(isGerman, isNotGerman), sep_mark = ".", decimals = 0
  ) %&gt;%
  gt::opt_all_caps() %&gt;%
  tab_options(
    table.font.size = "small",
    table.border.top.style = "none",
    table.border.bottom.color = "#215E8F",
    heading.border.bottom.color = "#215E8F", 
    column_labels.border.bottom.style = "none",
    table.background.color = "#e8f4fc",
    row.striping.background_color = "#d7ecf8",
    table.width = pct(40),
    heading.align = "left"
  )
```
]


---
class: left, top
## `gt`


.font90.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example


``` r
gtobj &lt;- gtobj %&gt;%
  tab_style(
    style = cell_text(weight = "bold", align = "center"),
    locations = cells_column_labels()
  ) %&gt;%
  tab_style(
    style = cell_text(align = "right"), location = cells_column_labels()
  ) %&gt;%
  tab_style(
    style = cell_text(weight = "bold"), locations = cells_stub_grand_summary()
  ) %&gt;%
  tab_style(
    style = cell_text(font = google_font("Newsreader")), 
    locations = list(cells_title(), cells_footnotes())
  ) %&gt;%
  tab_style(
    style = cell_text(size = "x-large"), locations = cells_title(groups = "title")
  )
```
]




---
class: left, top
## `gt`

<div id="gtexample" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gtexample table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gtexample thead, #gtexample tbody, #gtexample tfoot, #gtexample tr, #gtexample td, #gtexample th {
  border-style: none;
}

#gtexample p {
  margin: 0;
  padding: 0;
}

#gtexample .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #E8F4FC;
  width: 40%;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #215E8F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gtexample .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gtexample .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #E8F4FC;
  border-bottom-width: 0;
}

#gtexample .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #E8F4FC;
  border-top-width: 0;
}

#gtexample .gt_heading {
  background-color: #E8F4FC;
  text-align: left;
  border-bottom-color: #E8F4FC;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gtexample .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #215E8F;
}

#gtexample .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gtexample .gt_col_heading {
  color: #333333;
  background-color: #E8F4FC;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gtexample .gt_column_spanner_outer {
  color: #333333;
  background-color: #E8F4FC;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gtexample .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gtexample .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gtexample .gt_column_spanner {
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gtexample .gt_spanner_row {
  border-bottom-style: hidden;
}

#gtexample .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #E8F4FC;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gtexample .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #E8F4FC;
  font-size: 80%;
  font-weight: bolder;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gtexample .gt_from_md > :first-child {
  margin-top: 0;
}

#gtexample .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gtexample .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gtexample .gt_stub {
  color: #333333;
  background-color: #E8F4FC;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gtexample .gt_stub_row_group {
  color: #333333;
  background-color: #E8F4FC;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gtexample .gt_row_group_first td {
  border-top-width: 2px;
}

#gtexample .gt_row_group_first th {
  border-top-width: 2px;
}

#gtexample .gt_summary_row {
  color: #333333;
  background-color: #E8F4FC;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gtexample .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gtexample .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gtexample .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gtexample .gt_grand_summary_row {
  color: #333333;
  background-color: #E8F4FC;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gtexample .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gtexample .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gtexample .gt_striped {
  background-color: #D7ECF8;
}

#gtexample .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gtexample .gt_footnotes {
  color: #333333;
  background-color: #E8F4FC;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gtexample .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gtexample .gt_sourcenotes {
  color: #333333;
  background-color: #E8F4FC;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gtexample .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gtexample .gt_left {
  text-align: left;
}

#gtexample .gt_center {
  text-align: center;
}

#gtexample .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gtexample .gt_font_normal {
  font-weight: normal;
}

#gtexample .gt_font_bold {
  font-weight: bold;
}

#gtexample .gt_font_italic {
  font-style: italic;
}

#gtexample .gt_super {
  font-size: 65%;
}

#gtexample .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gtexample .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gtexample .gt_indent_1 {
  text-indent: 5px;
}

#gtexample .gt_indent_2 {
  text-indent: 10px;
}

#gtexample .gt_indent_3 {
  text-indent: 15px;
}

#gtexample .gt_indent_4 {
  text-indent: 20px;
}

#gtexample .gt_indent_5 {
  text-indent: 25px;
}

#gtexample .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#gtexample div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}

#gtexample .gt_row.gt_right {
  background-color: #e8f4fc;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="4" class="gt_heading gt_title gt_font_normal" style="font-family: Newsreader; font-size: x-large;">Population of Gelsenkirchen</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="font-family: Newsreader;">by District and German Nationality</td>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="a::stub"></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="text-align: right; font-weight: bold;" scope="col" id="District">District</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="text-align: right; font-weight: bold;" scope="col" id="isNotGerman">Non-German</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="text-align: right; font-weight: bold;" scope="col" id="isGerman">German</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><th id="stub_1_1" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="stub_1_1 District" class="gt_row gt_right">1</td>
<td headers="stub_1_1 isNotGerman" class="gt_row gt_right">26.399</td>
<td headers="stub_1_1 isGerman" class="gt_row gt_right">71.768</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="stub_1_2 District" class="gt_row gt_right">2</td>
<td headers="stub_1_2 isNotGerman" class="gt_row gt_right">15.390</td>
<td headers="stub_1_2 isGerman" class="gt_row gt_right">42.742</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="stub_1_3 District" class="gt_row gt_right">3</td>
<td headers="stub_1_3 isNotGerman" class="gt_row gt_right">9.471</td>
<td headers="stub_1_3 isGerman" class="gt_row gt_right">25.852</td></tr>
    <tr><th id="stub_1_4" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="stub_1_4 District" class="gt_row gt_right">4</td>
<td headers="stub_1_4 isNotGerman" class="gt_row gt_right">10.725</td>
<td headers="stub_1_4 isGerman" class="gt_row gt_right">30.086</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="stub_1_5 District" class="gt_row gt_right">5</td>
<td headers="stub_1_5 isNotGerman" class="gt_row gt_right">10.872</td>
<td headers="stub_1_5 isGerman" class="gt_row gt_right">29.794</td></tr>
    <tr><th id="grand_summary_stub_1" scope="row" class="gt_row gt_left gt_stub gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row" style="font-weight: bold;">TOTALS</th>
<td headers="grand_summary_stub_1 District" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row"><br /></td>
<td headers="grand_summary_stub_1 isNotGerman" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">72.857</td>
<td headers="grand_summary_stub_1 isGerman" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">200.242</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" style="font-family: Newsreader;" colspan="4"> Source: City of Gelsenkirchen, Statistics &amp; Monitoring</td>
    </tr>
  </tfoot>
</table>
</div>


---
class: left, top
## `gtsummary`

- `gtsummary` offers functions to print table for model objects






---
class: left, top
## `stargazer`

- `stargazer` takes model objects as input and automatically creates an output table   

&lt;br&gt;

.pull-left[.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example

````markdown
```{r, results='asis', echo=TRUE}

linear_model &lt;- lm(mpg ~ cyl + wt, 
      data = mtcars)
      
stargazer::stargazer(linear_model, 
      type = "html", 
      out.header = TRUE, 
      omit.table.layout = "sn")
      
```
````
]]

--

.font60[.pull-right[


&lt;table style="text-align:center"&gt;&lt;tr&gt;&lt;td colspan="2" style="border-bottom: 1px solid black"&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;&lt;em&gt;Dependent variable:&lt;/em&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td colspan="1" style="border-bottom: 1px solid black"&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;mpg&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td colspan="2" style="border-bottom: 1px solid black"&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style="text-align:left"&gt;cyl&lt;/td&gt;&lt;td&gt;-1.508&lt;sup&gt;***&lt;/sup&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;(0.415)&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;wt&lt;/td&gt;&lt;td&gt;-3.191&lt;sup&gt;***&lt;/sup&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;(0.757)&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;Constant&lt;/td&gt;&lt;td&gt;39.686&lt;sup&gt;***&lt;/sup&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;(1.715)&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td colspan="2" style="border-bottom: 1px solid black"&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td colspan="2" style="border-bottom: 1px solid black"&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

]]

---
class: left, top
## Plots

&lt;br&gt;

.pull-left[.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example
````markdown
```{r, fig.height = 5}
hist(rnorm(1000))
```
````
]]

--

.pull-right[
![](rmarkdown_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;
]

---
class: left, top
## Links and External Graphics

- Links can be created as follows:

.blockquote.exercise[
```markdown
[This is a link to the R Markdown book](https://bookdown.org/yihui/rmarkdown/)
```
]

--

- To include figures saved on your computer use

.blockquote.exercise[
```markdown
![Figure Description](path/to/figure.png)
```
]

--

- If you need more control over the appearence of the figure you can use

.blockquote.exercise[
````markdown
```{r, out.width = "500px", fig.align='center'}
knitr::include_graphics("path/to/figure.png")
```
````
]

---
class: left, top
## Using HTML and `\(\LaTeX{}\)`

- If only R Markdown is used the document can be compiled without problems
to all supported output formats. 

- Sometimes R Markdown is too limited and one would like to use the more powerful 
tools provided by HTML or `\(\LaTeX{}\)`. 

- If the output format is HTML, you can also use HTML instead of R Markdown 
  or mix both.

- If the output format is PDF, the same can be said about `\(\LaTeX{}\)`


---
class: left, top
## Interactive documents

- If the output is HTML, interactive elements (usually some JavaScript) can be included. 
- There are R packages producing interactive output e.g. `plotly` for interactive plots or
`leaflet` for interactive maps. 

--

.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example: plot

````markdown
```{r}
library(plotly)
mtcars$am[which(mtcars$am == 0)] &lt;- 'Automatic'
mtcars$am[which(mtcars$am == 1)] &lt;- 'Manual'
mtcars$am &lt;- as.factor(mtcars$am)
plot_ly(mtcars, x = ~wt, y = ~hp, z = ~qsec, color = ~am, colors = c('#BF382A', '#0C4B8E')) %&gt;%
  add_markers() %&gt;%
  layout(scene = list(xaxis = list(title = 'Weight'),
                     yaxis = list(title = 'Gross horsepower'),
                     zaxis = list(title = '1/4 mile time')))

```
````
]

---
class: left, top
## Interactive documents

<div class="plotly html-widget html-fill-item" id="htmlwidget-6014fb05181eefb033d5" style="width:90%;height:70%;"></div>
<script type="application/json" data-for="htmlwidget-6014fb05181eefb033d5">{"x":{"visdat":{"2b79282742188c":["function () ","plotlyVisDat"]},"cur_data":"2b79282742188c","attrs":{"2b79282742188c":{"x":{},"y":{},"z":{},"color":{},"colors":["#BF382A","#0C4B8E"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter3d","mode":"markers","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"Weight"},"yaxis":{"title":"Gross horsepower"},"zaxis":{"title":"1/4 mile time"}},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[3.2149999999999999,3.4399999999999999,3.46,3.5699999999999998,3.1899999999999999,3.1499999999999999,3.4399999999999999,3.4399999999999999,4.0700000000000003,3.73,3.7799999999999998,5.25,5.4240000000000004,5.3449999999999998,2.4649999999999999,3.52,3.4350000000000001,3.8399999999999999,3.8450000000000002],"y":[110,175,105,245,62,95,123,123,180,180,180,205,215,230,97,150,150,245,175],"z":[19.440000000000001,17.02,20.219999999999999,15.84,20,22.899999999999999,18.300000000000001,18.899999999999999,17.399999999999999,17.600000000000001,18,17.98,17.82,17.420000000000002,20.010000000000002,16.870000000000001,17.300000000000001,15.41,17.050000000000001],"type":"scatter3d","mode":"markers","name":"Automatic","marker":{"color":"rgba(191,56,42,1)","line":{"color":"rgba(191,56,42,1)"}},"textfont":{"color":"rgba(191,56,42,1)"},"error_y":{"color":"rgba(191,56,42,1)"},"error_x":{"color":"rgba(191,56,42,1)"},"line":{"color":"rgba(191,56,42,1)"},"frame":null},{"x":[2.6200000000000001,2.875,2.3199999999999998,2.2000000000000002,1.615,1.835,1.9350000000000001,2.1400000000000001,1.5129999999999999,3.1699999999999999,2.77,3.5699999999999998,2.7799999999999998],"y":[110,110,93,66,52,65,66,91,113,264,175,335,109],"z":[16.460000000000001,17.02,18.609999999999999,19.469999999999999,18.52,19.899999999999999,18.899999999999999,16.699999999999999,16.899999999999999,14.5,15.5,14.6,18.600000000000001],"type":"scatter3d","mode":"markers","name":"Manual","marker":{"color":"rgba(12,75,142,1)","line":{"color":"rgba(12,75,142,1)"}},"textfont":{"color":"rgba(12,75,142,1)"},"error_y":{"color":"rgba(12,75,142,1)"},"error_x":{"color":"rgba(12,75,142,1)"},"line":{"color":"rgba(12,75,142,1)"},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>

- For more examples see [plot.ly](https://plot.ly/r/).

---
class: left, top
## Interactive documents

.pull-left[.blockquote.exercise[.font70[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example: map 

````markdown
```{r, out.width='100%'}
library(leaflet)
leaflet() %&gt;% addTiles() %&gt;%
  setView(7.005070, 51.463675,zoom = 17) %&gt;%
  addMarkers(
    7.005070, 51.463675
  )
```
````
]]]


.pull-right[

<div class="leaflet html-widget html-fill-item" id="htmlwidget-cea93bfd5756d41304cc" style="width:504px;height:450px;"></div>
<script type="application/json" data-for="htmlwidget-cea93bfd5756d41304cc">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addMarkers","args":[51.463675,7.00507,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,"Uni DUE",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"setView":[[51.463675,7.00507],17,[]],"limits":{"lat":[51.463675,51.463675],"lng":[7.00507,7.00507]}},"evals":[],"jsHooks":[]}</script>

]

--

- Learn more at [Leaflet for R](https://rstudio.github.io/leaflet).

---
class: left, top
## Interactive documents

.font80[

- The `DT` package also allows us to include interactive tables. 

.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example: map

````markdown
```{r}
DT::datatable( head(iris, 10),
  fillContainer = TRUE,  options = list(pageLength = 5))
```
````

]]

--

&lt;br&gt;

.font50[

<div class="datatables html-widget html-fill-item" id="htmlwidget-00192c528a7458619f03" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-00192c528a7458619f03">{"x":{"filter":"none","vertical":false,"fillContainer":true,"data":[["1","2","3","4","5","6","7","8","9","10"],[5.1,4.9,4.7,4.6,5,5.4,4.6,5,4.4,4.9],[3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1],[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5],[0.2,0.2,0.2,0.2,0.2,0.4,0.3,0.2,0.2,0.1],["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa"]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Sepal.Length<\/th>\n      <th>Sepal.Width<\/th>\n      <th>Petal.Length<\/th>\n      <th>Petal.Width<\/th>\n      <th>Species<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Sepal.Length","targets":1},{"name":"Sepal.Width","targets":2},{"name":"Petal.Length","targets":3},{"name":"Petal.Width","targets":4},{"name":"Species","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
]


---
class: left, top
## Advanced Topics: Hooks

.font70[
- You can define your own chunk options using hooks. This is a topic for you if you want to become 
a professional `knitr` user. 
]

--

#### Chunk Hooks 

.font80[
- A chunk hook is a function defining what should happen before or after a code chunk.
]

.code80[
.blockquote.exercise[

``` r
# Template for a chunk hook
knitr::knit_hooks$set(
foo_hook = function(before, options, envir) {
    if (before) {
        ## code to be run before a chunk
    } else {
        ## code to be run after a chunk
    }
  })
```
]]

--

.font80[
- Before the chunk is evaluated the function is called with `before == TRUE`  
and after with `before == FALSE`.
- `options` is a list with the current chunk options (optional). 
- `envir` is the enviornment in which the the code chunk is evaluated (optional).
]

---
class: left, top
## Chunk Hooks: Example

.font90[
- To reduce the margins of a plot with chunk option `small.mar = TRUE` put the following code chunk 
at the top of your document. 


.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Function
````markdown
```{r, eval = FALSE, echo=TRUE}
knitr::knit_hooks$set(small.mar = function(before) {
    if (before) par(mar = c(1, 1, 1, 1))  
})
```
````
]]

--

.font90[
- `small.mar` now can be used as other chunk options. 

.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example
````markdown
```{r, small.mar = TRUE}
hist(rnorm)
```
````
]]

---
class: left, top
## Output Hooks

.font70[
- Output hooks are (render) functions that define how source code and its output is presented.
- There are 8 output hooks to deal with differnt types of output: 
  - `source`: the source code
  - `output`: what would have been printed in an R terminal except warnings, messages and errors. 
  - `warnings`: warnings from `warning()`
  - `message`: messages from `message()`
  - `error`: errors from `stop()`
  - `plot`: graphics output
  - `inline`: output of inline R code
  - `chunk`: all the output of a chunk
  - `document`: the output of the whole document 
]

--

.font70[.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example

``` r
knitr::knit_hooks$set(small.mar = function(before) {
    if (before) par(mar = c(1, 1, 1, 1))  
})
```
]]

--
.font70[
- There is for each of the above a default which you can adjust to your needs. 
]

---
class: left, top
## Output Hooks: Example

- You can e.g. use a hook to consistently style all your tables using `kableExtra`.  

.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example



``` r
default_source_hook &lt;- knit_hooks$get("source")
knit_hooks$set(
  source = function(x, options) {
    if(is.null(options$table))
      default_source_hook(x, options)
    else {
      eval(parse(text = x)) %&gt;%
        kable("html") %&gt;%
        kable_styling("hover", full_width = F)
    }
  }
)
```
]

---
class: left, top
## The `here` package

.font90[
- `here::here()` is returning the path to the directory where your project file lives in. 
]

--

.font90[
**Why is this useful?** 

- If an Rmarkdown file is compiled it sets the working directory to the folder where your `.rmd` file is stored.
- Usually you do some interactive work before compiling. If you work in an project then the working directory 
  for the interactive part is set to the path of your project file. 
- If your project becomes more complex and you are using subdirectories the working directory set for compilation
  and interactive work are not necessary the same. This is quite annoying.
]

--

.font90[
#### Solution

- use `here::here()` when setting a path.

.blockquote.exercise[
#### &lt;svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#004c93;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"&gt;&lt;/path&gt;&lt;/svg&gt; Example

``` r
load(here::here("Data", "my_dataset.rda"))
```
]]
---
class: exercise_slide
## Exercises

1. Create an R Markdown document that is compiled to an HTML document. 
   The document should consist of two sections:
    - Crime Incidents Report Data
    - Explorative Data Analysis.
2. Use the first section to read in the "Crime Incident Reports" available under 
   [Boston crime](https://data.boston.gov/dataset/crime-incident-reports-august-2015-to-date-source-new-system). Add some information about the source of the data and list all available columns with a short description  
   Hint: Take a look at the table `RMS_Crime_Incident_Field_Explanation`. 

3. Optimize your code chunks so that the document doesn't load the data every time you compile. 

4. Use the second section for an EDA. You are free to do whatever you like but produce at least one table and one graphic. 

5. Hide all your code chunks by setting a global option. 

6. Create a PDF document containing what you did. For this `\(\LaTeX{}\)` needs to be 
   installed. 

---
class: exercise_slide
## Exercises
&lt;ol start="7"&gt; 
&lt;li&gt;  Remember that nested ordered lists are not supported by Rmarkdown. Nonetheless, produce one in your HTML and your PDF document. &lt;/li&gt;
&lt;li&gt; Also, build some slides using the code you have written. You are free to choose one presentation format among all available formats. &lt;/li&gt;
&lt;li&gt; Find out how to always use the current date in the YAML header.&lt;/li&gt;
&lt;/ol&gt;




    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="../assets/remark-zoom.js"></script>
<script src="../xaringan_files/macros.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
  "highlightStyle": "github",
  "highlightLines": true,
  "countIncrementalSlides": false,
  "ratio": "16:9",
  "navigation": {
    "scroll": false
  }
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
